<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ariel Scan</title>

    <!-- Manifest PWA -->
    <link rel="manifest" href="/manifest.json">

    <!-- Estilos -->
    <link rel="stylesheet" href="/styles.css" />

    <!-- CSS del recortador -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/document-cropper@latest/dist/document-cropper.min.css">

    <!-- OpenCV (NECESARIO PARA FILTROS PRO) -->
    <script async src="https://docs.opencv.org/4.x/opencv.js"></script>

    <!-- Document Cropper PRO -->
    <script src="https://cdn.jsdelivr.net/npm/document-cropper@latest/dist/document-cropper.min.js"></script>

    <!-- Filtros PRO (DEBES CREAR filtros.js) -->
    <script src="/filtros.js"></script>

    <!-- LibrerÃ­a para generar PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Scripts de tu aplicaciÃ³n -->
    <script defer src="/app.js"></script>
    <script defer src="/pdf.js"></script>
    <script defer src="/share.js"></script>
  </head>

  <body>
    <header class="header">
      <h1 class="title">Ariel Scan</h1>
    </header>

    <main class="container">
      <!-- NUEVO ESCANEO -->
      <h2 class="section-title">ğŸ“„ Nuevo escaneo</h2>

      <!-- SECCIÃ“N DE CAPTURA -->
      <div id="capturaSection">
        <h2 class="subtitle">AgregÃ¡ las pÃ¡ginas</h2>

        <!-- INPUT OCULTO PARA LA CÃMARA -->
        <input
          id="inputFoto"
          type="file"
          accept="image/*"
          capture="environment"
          class="hidden"
        />

        <p class="hint">PodÃ©s agregar todas las pÃ¡ginas que necesites.</p>

        <!-- BOTÃ“N PARA ABRIR CÃMARA -->
        <button id="btnAgregar" class="btn-camera">
          ğŸ“· Agregar pÃ¡gina
        </button>

        <!-- PREVIEW DE IMÃGENES -->
        <ul id="previewList" class="preview-list"></ul>

        <!-- CONTINUAR (decorativo) -->
        <h2 class="section-title">â¡ï¸ Continuar</h2>
      </div>

      <!-- SECCIÃ“N DETALLES -->
      <div id="detallesSection" class="hidden">
        <h2 class="subtitle">Detalles del documento</h2>

        <label>Nombre del PDF</label>
        <input
          id="nombrePdf"
          type="text"
          placeholder="Ej.: Documento_1"
          class="input"
        />

        <label>Email destino</label>
        <input
          value="impresioncencosud@gmail.com"
          class="input disabled"
          disabled
        />

        <button id="btnEnviar" class="btn-primary mt-lg">
          ğŸ“¤ Generar y enviar
        </button>
      </div>
    </main>

    <!-- REGISTRO DEL SERVICE WORKER -->
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("/service-worker.js", { scope: "/" })
          .then((reg) =>
            console.log("Service Worker registrado correctamente", reg)
          )
          .catch((err) => console.error("Error registrando SW:", err));
      }
    </script>
  </body>
</html>
